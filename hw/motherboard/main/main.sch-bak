EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title "KAPINE Motherboard"
Date ""
Rev "1"
Comp "Verneri Hirvonen"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Switch:SW_Push SW1
U 1 1 5E3D0E9E
P 4850 2100
F 0 "SW1" H 5050 2000 50  0000 C CNN
F 1 "SW_Push" H 4750 2000 50  0000 C CNN
F 2 "Button_Switch_SMD:SW_SPST_TL3342" H 4850 2300 50  0001 C CNN
F 3 "" H 4850 2300 50  0001 C CNN
	1    4850 2100
	1    0    0    -1  
$EndComp
Wire Wire Line
	5050 2100 5100 2100
$Comp
L Device:C_Small C11
U 1 1 5E3D1058
P 4850 1850
F 0 "C11" V 4750 1750 50  0000 C CNN
F 1 "100n" V 4750 2000 50  0000 C CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 4850 1850 50  0001 C CNN
F 3 "~" H 4850 1850 50  0001 C CNN
	1    4850 1850
	0    1    1    0   
$EndComp
Wire Wire Line
	4950 1850 5100 1850
Wire Wire Line
	5100 1850 5100 2100
Connection ~ 5100 2100
Wire Wire Line
	5100 2100 5500 2100
Wire Wire Line
	4750 1850 4600 1850
Wire Wire Line
	4600 1850 4600 2100
Wire Wire Line
	4600 2100 4650 2100
Wire Wire Line
	4600 2100 4400 2100
Connection ~ 4600 2100
$Comp
L power:GND #PWR09
U 1 1 5E3D149B
P 4400 2100
F 0 "#PWR09" H 4400 1850 50  0001 C CNN
F 1 "GND" H 4400 2150 50  0000 C CNN
F 2 "" H 4400 2100 50  0001 C CNN
F 3 "" H 4400 2100 50  0001 C CNN
	1    4400 2100
	1    0    0    -1  
$EndComp
Text Label 5200 2100 0    50   ~ 0
NRST
$Comp
L Device:R R1
U 1 1 5E3D16CD
P 1450 4650
F 0 "R1" V 1550 4650 50  0000 C CNN
F 1 "10k" V 1450 4650 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 1380 4650 50  0001 C CNN
F 3 "~" H 1450 4650 50  0001 C CNN
	1    1450 4650
	0    1    1    0   
$EndComp
$Comp
L power:VDD #PWR05
U 1 1 5E3D201C
P 1100 4400
F 0 "#PWR05" H 1100 4250 50  0001 C CNN
F 1 "VDD" H 1117 4573 50  0000 C CNN
F 2 "" H 1100 4400 50  0001 C CNN
F 3 "" H 1100 4400 50  0001 C CNN
	1    1100 4400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR06
U 1 1 5E3D20BD
P 1100 4900
F 0 "#PWR06" H 1100 4650 50  0001 C CNN
F 1 "GND" H 1105 4727 50  0000 C CNN
F 2 "" H 1100 4900 50  0001 C CNN
F 3 "" H 1100 4900 50  0001 C CNN
	1    1100 4900
	1    0    0    -1  
$EndComp
$Comp
L power:VDD #PWR01
U 1 1 5E3D29C9
P 850 2600
F 0 "#PWR01" H 850 2450 50  0001 C CNN
F 1 "VDD" H 867 2773 50  0000 C CNN
F 2 "" H 850 2600 50  0001 C CNN
F 3 "" H 850 2600 50  0001 C CNN
	1    850  2600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR02
U 1 1 5E3D29E5
P 850 3000
F 0 "#PWR02" H 850 2750 50  0001 C CNN
F 1 "GND" H 855 2827 50  0000 C CNN
F 2 "" H 850 3000 50  0001 C CNN
F 3 "" H 850 3000 50  0001 C CNN
	1    850  3000
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C1
U 1 1 5E3D2A82
P 850 2800
F 0 "C1" H 942 2846 50  0000 L CNN
F 1 "4.7u" H 942 2755 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 850 2800 50  0001 C CNN
F 3 "~" H 850 2800 50  0001 C CNN
	1    850  2800
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C3
U 1 1 5E3D2AD8
P 1200 2800
F 0 "C3" H 1292 2846 50  0000 L CNN
F 1 "100n" H 1292 2755 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 1200 2800 50  0001 C CNN
F 3 "~" H 1200 2800 50  0001 C CNN
	1    1200 2800
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C5
U 1 1 5E3D2B00
P 1550 2800
F 0 "C5" H 1642 2846 50  0000 L CNN
F 1 "100n" H 1642 2755 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 1550 2800 50  0001 C CNN
F 3 "~" H 1550 2800 50  0001 C CNN
	1    1550 2800
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C7
U 1 1 5E3D2B2A
P 1900 2800
F 0 "C7" H 1992 2846 50  0000 L CNN
F 1 "100n" H 1992 2755 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 1900 2800 50  0001 C CNN
F 3 "~" H 1900 2800 50  0001 C CNN
	1    1900 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	850  2600 850  2650
Wire Wire Line
	850  2900 850  2950
Wire Wire Line
	850  2650 1200 2650
Wire Wire Line
	1900 2650 1900 2700
Connection ~ 850  2650
Wire Wire Line
	850  2650 850  2700
Wire Wire Line
	850  2950 1200 2950
Wire Wire Line
	1900 2950 1900 2900
Connection ~ 850  2950
Wire Wire Line
	850  2950 850  3000
Wire Wire Line
	1550 2650 1550 2700
Connection ~ 1550 2650
Wire Wire Line
	1550 2650 1900 2650
Wire Wire Line
	1200 2650 1200 2700
Connection ~ 1200 2650
Wire Wire Line
	1200 2650 1550 2650
Wire Wire Line
	1200 2900 1200 2950
Connection ~ 1200 2950
Wire Wire Line
	1200 2950 1550 2950
Wire Wire Line
	1550 2900 1550 2950
Connection ~ 1550 2950
Wire Wire Line
	1550 2950 1900 2950
Text Notes 1150 3200 0    50   ~ 0
VDD decoupling
Wire Wire Line
	5500 3300 3500 3300
Wire Wire Line
	3500 3300 3500 3750
$Comp
L power:GND #PWR07
U 1 1 5E3D8B34
P 3900 3550
F 0 "#PWR07" H 3900 3300 50  0001 C CNN
F 1 "GND" H 3900 3400 50  0000 C CNN
F 2 "" H 3900 3550 50  0001 C CNN
F 3 "" H 3900 3550 50  0001 C CNN
	1    3900 3550
	-1   0    0    1   
$EndComp
$Comp
L Device:Crystal_GND24 Y1
U 1 1 5E3D8F68
P 3900 3750
F 0 "Y1" H 4050 3850 50  0000 L CNN
F 1 "HSE" H 4050 3650 50  0000 L CNN
F 2 "Crystal:Crystal_SMD_Abracon_ABM3C-4Pin_5.0x3.2mm" H 3900 3750 50  0001 C CNN
F 3 "~" H 3900 3750 50  0001 C CNN
	1    3900 3750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR08
U 1 1 5E3D8F9E
P 3900 4150
F 0 "#PWR08" H 3900 3900 50  0001 C CNN
F 1 "GND" H 3905 3977 50  0000 C CNN
F 2 "" H 3900 4150 50  0001 C CNN
F 3 "" H 3900 4150 50  0001 C CNN
	1    3900 4150
	1    0    0    -1  
$EndComp
Wire Wire Line
	3750 3750 3500 3750
$Comp
L Device:C_Small C9
U 1 1 5E3DA2D5
P 3500 3900
F 0 "C9" H 3592 3946 50  0000 L CNN
F 1 "20p" H 3592 3855 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 3500 3900 50  0001 C CNN
F 3 "~" H 3500 3900 50  0001 C CNN
	1    3500 3900
	1    0    0    -1  
$EndComp
Wire Wire Line
	3500 3800 3500 3750
Connection ~ 3500 3750
$Comp
L Device:C_Small C10
U 1 1 5E3DACD0
P 4300 3900
F 0 "C10" H 4392 3946 50  0000 L CNN
F 1 "20p" H 4392 3855 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 4300 3900 50  0001 C CNN
F 3 "~" H 4300 3900 50  0001 C CNN
	1    4300 3900
	1    0    0    -1  
$EndComp
Wire Wire Line
	4300 3800 4300 3750
Wire Wire Line
	4300 3750 4050 3750
Wire Wire Line
	3500 4000 3500 4050
Wire Wire Line
	3500 4050 3900 4050
Wire Wire Line
	4300 4050 4300 4000
Wire Wire Line
	3900 3950 3900 4050
Connection ~ 3900 4050
Wire Wire Line
	3900 4050 4300 4050
Wire Wire Line
	3900 4050 3900 4150
Wire Wire Line
	4300 3750 4300 3400
Connection ~ 4300 3750
$Comp
L Device:R R3
U 1 1 5E3E1436
P 4850 3400
F 0 "R3" V 4950 3400 50  0000 C CNN
F 1 "390" V 4850 3400 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 4780 3400 50  0001 C CNN
F 3 "~" H 4850 3400 50  0001 C CNN
	1    4850 3400
	0    1    1    0   
$EndComp
Wire Wire Line
	4300 3400 4700 3400
Wire Wire Line
	5000 3400 5500 3400
$Comp
L power:VDDA #PWR012
U 1 1 5E3E315A
P 6500 1900
F 0 "#PWR012" H 6500 1750 50  0001 C CNN
F 1 "VDDA" H 6517 2073 50  0000 C CNN
F 2 "" H 6500 1900 50  0001 C CNN
F 3 "" H 6500 1900 50  0001 C CNN
	1    6500 1900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR04
U 1 1 5E3E7218
P 850 3900
F 0 "#PWR04" H 850 3650 50  0001 C CNN
F 1 "GND" H 855 3727 50  0000 C CNN
F 2 "" H 850 3900 50  0001 C CNN
F 3 "" H 850 3900 50  0001 C CNN
	1    850  3900
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C2
U 1 1 5E3E721E
P 850 3700
F 0 "C2" H 942 3746 50  0000 L CNN
F 1 "1u" H 942 3655 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 850 3700 50  0001 C CNN
F 3 "~" H 850 3700 50  0001 C CNN
	1    850  3700
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C4
U 1 1 5E3E7225
P 1200 3700
F 0 "C4" H 1292 3746 50  0000 L CNN
F 1 "10n" H 1292 3655 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 1200 3700 50  0001 C CNN
F 3 "~" H 1200 3700 50  0001 C CNN
	1    1200 3700
	1    0    0    -1  
$EndComp
Wire Wire Line
	850  3500 850  3550
Wire Wire Line
	850  3800 850  3850
Wire Wire Line
	850  3550 1200 3550
Connection ~ 850  3550
Wire Wire Line
	850  3550 850  3600
Wire Wire Line
	850  3850 1200 3850
Connection ~ 850  3850
Wire Wire Line
	850  3850 850  3900
Wire Wire Line
	1200 3550 1200 3600
Wire Wire Line
	1200 3800 1200 3850
Text Notes 1150 4100 0    50   ~ 0
VDDA decoupling
$Comp
L Jumper:Jumper_3_Open JP1
U 1 1 5E3EAEFE
P 1100 4650
F 0 "JP1" V 1146 4737 50  0000 L CNN
F 1 "boot select" V 1055 4737 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x03_P2.54mm_Vertical" H 1100 4650 50  0001 C CNN
F 3 "~" H 1100 4650 50  0001 C CNN
	1    1100 4650
	0    -1   -1   0   
$EndComp
Text Notes 9050 5750 0    50   ~ 0
TODO:\n- 3.3V regulator for MCU \n- 5V regulator for leds\n- data output connector for leds\n- power input connector\n- programmer connector\n
$Comp
L power:VDDA #PWR03
U 1 1 5E3FE15B
P 850 3500
F 0 "#PWR03" H 850 3350 50  0001 C CNN
F 1 "VDDA" H 867 3673 50  0000 C CNN
F 2 "" H 850 3500 50  0001 C CNN
F 3 "" H 850 3500 50  0001 C CNN
	1    850  3500
	1    0    0    -1  
$EndComp
Text Notes 850  650  0    50   ~ 0
Programmer
Text Label 6950 3400 0    50   ~ 0
SWDIO
Wire Wire Line
	6950 3400 6900 3400
Text Label 6950 3500 0    50   ~ 0
SWCLK
Wire Wire Line
	6950 3500 6900 3500
Text Label 6950 4100 0    50   ~ 0
SWO
Wire Wire Line
	6950 4100 6900 4100
Wire Wire Line
	5450 2300 5500 2300
Wire Wire Line
	1300 4650 1250 4650
Wire Wire Line
	6900 2100 7450 2100
$Sheet
S 7450 2000 550  200 
U 5E444A98
F0 "rgb" 50
F1 "rgb.sch" 50
F2 "DIN" I L 7450 2100 50 
$EndSheet
$Comp
L Connector_Generic_MountingPin:Conn_01x06_MountingPin J1
U 1 1 5F3C80F5
P 1200 1250
F 0 "J1" H 1350 1350 50  0000 C CNN
F 1 "ST-LINK/V2-1" H 1600 1450 50  0000 C CNN
F 2 "Connector_Molex:Molex_PicoBlade_53261-0671_1x06-1MP_P1.25mm_Horizontal" H 1200 1250 50  0001 C CNN
F 3 "~" H 1200 1250 50  0001 C CNN
	1    1200 1250
	1    0    0    -1  
$EndComp
$Comp
L power:VDD #PWR089
U 1 1 5F3EC30D
P 950 1050
F 0 "#PWR089" H 950 900 50  0001 C CNN
F 1 "VDD" H 967 1223 50  0000 C CNN
F 2 "" H 950 1050 50  0001 C CNN
F 3 "" H 950 1050 50  0001 C CNN
	1    950  1050
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR090
U 1 1 5F3EC858
P 950 1550
F 0 "#PWR090" H 950 1300 50  0001 C CNN
F 1 "GND" H 955 1377 50  0000 C CNN
F 2 "" H 950 1550 50  0001 C CNN
F 3 "" H 950 1550 50  0001 C CNN
	1    950  1550
	1    0    0    -1  
$EndComp
Text Label 950  1450 2    50   ~ 0
SWO
Text Label 950  1350 2    50   ~ 0
SWDIO
Text Label 950  1250 2    50   ~ 0
SWCLK
Text Label 950  1150 2    50   ~ 0
NRST
Wire Wire Line
	950  1050 1000 1050
Wire Wire Line
	950  1150 1000 1150
Wire Wire Line
	950  1250 1000 1250
Wire Wire Line
	950  1350 1000 1350
Wire Wire Line
	950  1450 1000 1450
Wire Wire Line
	950  1550 1000 1550
NoConn ~ 1200 1750
Text Notes 3550 4450 0    50   ~ 0
TODO: Select crystal
$Comp
L MCU_ST_STM32F3:STM32F303RETx U1
U 1 1 5F40C94C
P 6200 3700
F 0 "U1" H 6200 2500 50  0000 C CNN
F 1 "STM32F303RETx" H 6200 2400 50  0000 C CNN
F 2 "Package_QFP:LQFP-64_10x10mm_P0.5mm" H 5600 2000 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00118585.pdf" H 6200 3700 50  0001 C CNN
	1    6200 3700
	1    0    0    -1  
$EndComp
Text Label 1650 4650 0    50   ~ 0
boot_sel
Wire Wire Line
	1600 4650 1650 4650
Text Label 5450 2300 2    50   ~ 0
boot_sel
Text Notes 1350 5000 0    50   ~ 0
Boot select jumper
$Comp
L Device:C_Small C6
U 1 1 5F430C9E
P 2250 2800
F 0 "C6" H 2342 2846 50  0000 L CNN
F 1 "100n" H 2342 2755 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 2250 2800 50  0001 C CNN
F 3 "~" H 2250 2800 50  0001 C CNN
	1    2250 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	1900 2650 2250 2650
Wire Wire Line
	2250 2650 2250 2700
Connection ~ 1900 2650
Wire Wire Line
	2250 2900 2250 2950
Wire Wire Line
	2250 2950 1900 2950
Connection ~ 1900 2950
Wire Wire Line
	6400 5500 6300 5500
Connection ~ 6100 5500
Wire Wire Line
	6100 5500 6000 5500
Connection ~ 6200 5500
Wire Wire Line
	6200 5500 6100 5500
Connection ~ 6300 5500
Wire Wire Line
	6300 5500 6200 5500
$Comp
L power:GND #PWR014
U 1 1 5F44F05E
P 6000 5500
F 0 "#PWR014" H 6000 5250 50  0001 C CNN
F 1 "GND" H 6005 5327 50  0000 C CNN
F 2 "" H 6000 5500 50  0001 C CNN
F 3 "" H 6000 5500 50  0001 C CNN
	1    6000 5500
	1    0    0    -1  
$EndComp
Connection ~ 6000 5500
$Comp
L power:VDD #PWR013
U 1 1 5F456982
P 6000 1900
F 0 "#PWR013" H 6000 1750 50  0001 C CNN
F 1 "VDD" H 6017 2073 50  0000 C CNN
F 2 "" H 6000 1900 50  0001 C CNN
F 3 "" H 6000 1900 50  0001 C CNN
	1    6000 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	6000 1900 6100 1900
Connection ~ 6000 1900
Connection ~ 6100 1900
Wire Wire Line
	6100 1900 6200 1900
Connection ~ 6200 1900
Wire Wire Line
	6200 1900 6300 1900
Connection ~ 6300 1900
Wire Wire Line
	6300 1900 6400 1900
Wire Wire Line
	6900 3600 6950 3600
Wire Wire Line
	6900 4200 6950 4200
Text Label 6950 4200 0    50   ~ 0
JTAG_TRST
$Comp
L Connector:Conn_ARM_JTAG_SWD_10 J2
U 1 1 5F468D97
P 2400 1350
F 0 "J2" H 2900 2050 50  0000 R CNN
F 1 "Conn_ARM_JTAG_SWD_10" H 3350 1950 50  0000 R CNN
F 2 "Connector_PinHeader_1.27mm:PinHeader_2x05_P1.27mm_Vertical_SMD" H 2400 1350 50  0001 C CNN
F 3 "http://infocenter.arm.com/help/topic/com.arm.doc.ddi0314h/DDI0314H_coresight_components_trm.pdf" V 2050 100 50  0001 C CNN
	1    2400 1350
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR011
U 1 1 5F4707A3
P 2400 1950
F 0 "#PWR011" H 2400 1700 50  0001 C CNN
F 1 "GND" H 2405 1777 50  0000 C CNN
F 2 "" H 2400 1950 50  0001 C CNN
F 3 "" H 2400 1950 50  0001 C CNN
	1    2400 1950
	1    0    0    -1  
$EndComp
Text Label 2950 1050 0    50   ~ 0
NRST
Wire Wire Line
	2950 1050 2900 1050
Wire Wire Line
	3300 1250 2900 1250
Wire Wire Line
	3300 1350 2900 1350
Wire Wire Line
	3300 1450 2900 1450
Wire Wire Line
	2950 1550 2900 1550
Text Label 2950 1250 0    50   ~ 0
SWCLK
Text Label 2950 1350 0    50   ~ 0
SWDIO
Text Label 2950 1450 0    50   ~ 0
SWO
$Comp
L power:VDD #PWR010
U 1 1 5F47F5D9
P 2400 750
F 0 "#PWR010" H 2400 600 50  0001 C CNN
F 1 "VDD" H 2417 923 50  0000 C CNN
F 2 "" H 2400 750 50  0001 C CNN
F 3 "" H 2400 750 50  0001 C CNN
	1    2400 750 
	1    0    0    -1  
$EndComp
$EndSCHEMATC
